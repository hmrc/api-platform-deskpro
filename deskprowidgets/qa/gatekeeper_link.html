<!-- Head -->
<!-- This code lives in the api-platform-deskpro repository https://github.com/hmrc/api-platform-deskpro/tree/main/deskprowidgets -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<!-- Body -->
<!-- This code lives in the api-platform-deskpro repository https://github.com/hmrc/api-platform-deskpro/tree/main/deskprowidgets -->
<div class="container">
    <div data-type="deskpro-template" id="developer_link">
        <a href="https://admin.qa.tax.service.gov.uk/api-gatekeeper/deskpro/ticket/{{ data.ticket.id }}/developer" target="_blank">
            View Developer
        </a>
    </div>
</div>

<div class="container">
    <div data-type="deskpro-template" id="application_link">
        <a id="link" href="" target="_blank">
            View Application
        </a>
    </div>
</div>

<script>
    Deskpro.client.onReady(function (context) {
        if(context.data.ticket.customFields['field.9'] != null){
            $("#link").attr("href", "https://admin.qa.tax.service.gov.uk/api-gatekeeper/applications/"+context.data.ticket.customFields['field.9'].value);
        }
    });

    Deskpro.client.onChange(function (context) {
        if(context.data.ticket.customFields['field.9'] != null){
            Deskpro.utils.renderTemplate("application_link", context);
        }
        Deskpro.utils.renderTemplate("developer_link", context);
    });
</script>